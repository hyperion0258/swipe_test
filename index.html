<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vertical Swipe with Page Scroll</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            height: 300vh; /* 전체 페이지 스크롤 확인을 위한 높이 설정 */
            overflow-x: hidden; /* 가로 스크롤 방지 */
        }
        .swipe-container {
            width: 100%;
            height: 500px; /* 원하는 높이 설정 */
            overflow: hidden;
            position: relative;
        }
        .swipe-wrapper {
            display: flex;
            flex-direction: column;
            height: 100%;
            transition: transform 0.3s ease-in-out;
        }
        .swipe-item {
            height: 100%;
            flex-shrink: 0;
        }
        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body>
    <div class="swipe-container">
        <div class="swipe-wrapper" id="swipeWrapper">
            <div class="swipe-item"><img src="image1.jpg" alt="Image 1"></div>
            <div class="swipe-item"><img src="image2.jpg" alt="Image 2"></div>
            <div class="swipe-item"><img src="image3.jpg" alt="Image 3"></div>
        </div>
    </div>
    <script>
        let startY;
        let currentIndex = 0;
        const wrapper = document.getElementById('swipeWrapper');
        const items = document.querySelectorAll('.swipe-item');
        const totalItems = items.length;
        let isSwiping = false;

        // 스크롤 잠금/해제 함수
        function disableScroll() {
            document.body.style.overflowY = 'hidden';
        }

        function enableScroll() {
            document.body.style.overflowY = 'scroll';
        }

        wrapper.addEventListener('touchstart', (e) => {
            startY = e.tTouches[0].clientY;
            isSwiping = false; // 스와이프 초기화
            disableScroll(); // 스와이프 시작 시 스크롤 잠금
        });

        wrapper.addEventListener('touchmove', (e) => {
            const moveY = e.touches[0].clientY;
            const diffY = startY - moveY;

            if (Math.abs(diffY) > 30) { // 스와이프 임계값
                e.preventDefault(); // 페이지 전체 스크롤을 방지
                isSwiping = true;

                if (diffY > 0 && currentIndex < totalItems - 1) {
                    currentIndex++;
                } else if (diffY < 0 && currentIndex > 0) {
                    currentIndex--;
                }

                wrapper.style.transform = `translateY(-${currentIndex * 100}%)`;
                startY = moveY; // 새로운 터치 포인트를 업데이트
            }
        });

        wrapper.addEventListener('touchend', (e) => {
            enableScroll(); // 스와이프 종료 시 스크롤 해제
            if (!isSwiping) {
                window.scrollBy(0, startY - e.changedTouches[0].clientY);
            }
        });
    </script>
</body>
</html>
